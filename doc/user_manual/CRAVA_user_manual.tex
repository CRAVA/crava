%\documentclass[screen,citenumeric,long,10pt]{nrdoc}
\documentclass[screen,note,long,backref,indentpar]{nrdoc}
%\documentclass[twoside,citenumeric,long,10pt]{nrdoc_060418}
\usepackage{citesort}     % Virker ikke...
\usepackage{multicol}
%\usepackage{subfigure}
%\usepackage{fancyvrb}     % For crava model file
\usepackage{bm}           % For bold greek letters  --> /bm{theta}
%\usepackage{showlabels}
%\usepackage{floatflt}
%\usepackage{wrapfig}





% -------------------------------------------------
\title{CRAVA User Manual version 0.9.6}
\subject{CRAVA User Manual}
\frontpagefigure{images/FFT_flowdiagram} % No file extension.
\keywords{CRAVA, seismic, inversion, geostatistical, Bayesian, AVO, FFT}
\author{P{\aa}l Dahle\and Bj{\o}rn Fjellvoll\and Ragnar Hauge\and Odd Kolbj{\o}rnsen\and Anne Randi Syversveen\and Marit Ulvmoen }
\authorpdf{P{\aa}l Dahle, Bj{\o}rn Fjellvoll, Ragnar Hauge, Odd Kolbj{\o}rnsen, Anne Randi Syversveen and Marit Ulvmoen}
\aboutauthors{P{\aa}l Dahle is a Senior Research Scientist at NR,\\
              Bj{\o}rn Fjellvoll is a Research Scientist at NR,\\
              Ragnar Hauge  is a Chief Research Scientist at NR,\\
              Odd Kolbj{\o}rnsen is a Chief Research Scientist at NR, \\
              Anne Randi Syversveen is a Senior Research Scientist at NR and \\
              Marit Ulvmoen is a Research Scientist at NR.}
              
\availability{Open to targets}
\project{n/a}
\projectnumber{n/a}
\reportnumber{SAND/04/2009}
\target{NR, StatiolHydro, Norsar}
\researchfield{Reservoir characterisation}
% ------------------------------------------------

\makeindex

\newcommand{\vect}[1]{\ensuremath{\mathbf{#1}}}
\newcommand{\bmu}{\bm\mu}
\newcommand{\bSigma}{\mbox{\large\ensuremath{\boldsymbol{\Sigma}}}}
%\newcommand{\vp}{\ensuremath{\alpha}\xspace}     % V_{p}
%\newcommand{\vs}{\ensuremath{\beta}\xspace}      % V_{s}
\newcommand{\vp}{\ensuremath{V_p}\xspace}      % V_{p}
\newcommand{\vs}{\ensuremath{V_s}\xspace}      % V_{s}
\newcommand{\avp}{a_{\alpha}}
\newcommand{\avs}{a_{\beta}(\vec{x},t,\theta)}
\newcommand{\arho}{a_\rho(\vec{x},t,\theta)}
\newcommand{\cml}{\nu_m}
\newcommand{\cel}{\nu_e}
\newcommand{\cmt}{\nu_m}
\newcommand{\cet}{\nu_e}
%\newcommand{\cmt}{r_{\!m}}
%\newcommand{\cet}{r_{\!e}}
\newcommand{\rms}   {\textsf{Irap RMS}\xspace}
\newcommand{\crava} {\textsf{CRAVA}\xspace}
\newcommand{\storm} {\textsf{Storm}\xspace}
\newcommand{\matlab}{\textsf{MATLAB}\xspace}
\newcommand{\perl}  {\textsf{Perl}\xspace}
\newcommand{\scriptref}[2]{\ifthenelse{\boolean{screen}}
  {\hyperref[#1]{#2}}{#2 (see \ref{#1})}}

\providecommand{\autopageref}[1]{\hyperref[#1]{page~\pageref*{#1}}} %Missing definition in old version of hyperref
\def\chapterautorefname{Chapter}%
\def\sectionautorefname{Section}%
\def\subsectionautorefname{Section}%
\def\subsubsectionautorefname{Section}%
\def\paragraphautorefname{Section}%


\newcommand{\kw}[1]{\hyperref[#1]{\texttt{<#1>}}}
\newcommand{\rkw}[2]{\hyperref[#2]{\texttt{<#1>}}}
\newcommand{\rrkw}[3]{\hyperref[#3]{\texttt{<#1>}}}
%\newcommand{\rkw}[2]{\hyperref[#2]{\texttt{<#1>}}}
\newcommand{\newkw}[1]{\label{#1}\kwindex{#1}}
\newcommand{\rnewkw}[2]{\label{#2}\kwindex{#1}}
\newcommand{\rrnewkw}[3]{\label{#3}\kwindex{#1}}
\newcommand{\kwindex}[1]{\index{#1@\texttt{<#1>}}\index{element!\texttt{<#1>}}}
\newcommand{\necessary}{\small{ (necessary)}}
\newcommand{\hbracket}[1]{\texttt{<#1>}}
\newcommand{\Description}{\makebox[\rrr][l]{\textit{Description:}\xspace}}
\newcommand{\Argument}{\makebox[\rrr][l]{\textit{Argument:}\xspace}}
\newcommand{\Default}{\makebox[\rrr][l]{\textit{Default:}\xspace}}
\newlength{\rrr}
\settowidth{\rrr}{\textit{Description:}}


\newcommand{\slist}{\begin{itemize}}
\newcommand{\elist}{\end{itemize}}
    \setlength{\parindent}{0mm}
    \setlength{\parskip}{1ex}
    \renewcommand{\slist}{
    \begin{list}{}
    {
        \setlength{\itemsep}{0pt}      \setlength{\parsep}{0pt}
        \setlength{\topsep}{0pt}       \setlength{\partopsep}{0pt}
        \setlength{\itemindent}{-2em}
    }
}
\renewcommand{\elist}{\end{list}}

\newcommand{\svex}[1]{\begin{example}\label{#1}\begin{verbatim}}



\setcounter{secnumdepth}{6}
\setcounter{tocdepth}{6}
%%%%%%%%%%%%%%%%%%
\makeatletter
%%%%%%%%%%%%%%%%%%
\newcounter{subsubparagraph}[subparagraph]
\renewcommand{\thesubsubparagraph}{\thesubparagraph.\@arabic\c@subsubparagraph}
\newcommand{\subsubparagraph}{\@startsection{subsubparagraph}{6}{\parindent}
%
{3.25ex \@plus1ex \@minus .2ex}%
{-1em}%
{\normalfont\normalsize\bfseries}}
\newcommand*{\l@subsubparagraph}{\@dottedtocline{6}{14em}{7em}}
\let\subsubparagraphmark\@gobble
%%%%%%%%%%%%%%%%%%
\newcounter{subsubsubparagraph}[subsubparagraph]
\renewcommand{\thesubsubsubparagraph}{\thesubsubparagraph.\@arabic\c@subsubsubparagraph}
\newcommand{\subsubsubparagraph}{\@startsection{subsubsubparagraph}{7}{\parindent}%
{3.25ex \@plus1ex \@minus .2ex}%
{-1em}%
{\normalfont\normalsize\bfseries}}
\newcommand*{\l@subsubsubparagraph}{\@dottedtocline{7}{16em}{8em}}
\let\subsubsubparagraphmark\@gobble
\def\toclevel@subsubparagraph{6}
%%%%%%%%%%%%%%%%%%
\makeatother

%\renewcommand\floatpagefraction{.80}

\addtolength{\abovecaptionskip}{-0.4em}


\begin{document}

\maketitle

\begin{abstract}
CRAVA is a simple inversion tool, particularly suited for quick generation of first pass inversions and facies probabilities for use in geological modeling. This manual describes the theory behind, the main implementation structure, and the actual use of this program.
\end{abstract}

\tableofcontents
\clearemptydoublepage


\input{theory}
\newpage
\input{implementation}
\newpage
\input{userguide}
\newpage
\input{referencemanual}

%-----------------------------------------------------------------------------
%                                 APPENDIX
%-----------------------------------------------------------------------------

\appendix

%---------------------------------------------------

\chapter{Sample \crava model file}
\label{sec:crava-model-file}
\index{CRAVA!model file}

\vspace{-2em}

\begin{small}
\begin{verbatim}
<crava>
<actions>
  <mode> inversion </mode>
  <inversion-settings>
    <prediction> yes </prediction>
    <condition-to-wells> yes </condition-to-wells>
  </inversion-settings>
</actions>


<survey>
  <angular-correlation>
    <variogram-type> genexp </variogram-type>
    <range> 10 </range>
    <power> 1 </power>
  </angular-correlation>
  <segy-start-time> 2500 </segy-start-time>
  <angle-gather>
    <offset-angle> 16 </offset-angle>
    <seismic-data>
      <file-name> ../../5_two_cubes_four_wells_pred_nokrig/input/seismic/Cube16.segy </file-name>
    </seismic-data>
    <wavelet>
      <file-name>
        ../../5_two_cubes_four_wells_pred_nokrig/input/wavelets/CRAVA_Wavelet_Scaled_16.0_deg.asc
      </file-name>
    </wavelet>
    <signal-to-noise-ratio> 4 </signal-to-noise-ratio>
  </angle-gather>
  <angle-gather>
    <offset-angle> 28 </offset-angle>
    <seismic-data>
      <file-name> ../../5_two_cubes_four_wells_pred_nokrig/input/seismic/Cube28.segy </file-name>
    </seismic-data>
    <wavelet>
      <file-name>
        ../../5_two_cubes_four_wells_pred_nokrig/input/wavelets/CRAVA_Wavelet_Scaled_28.0_deg.asc
      </file-name>
    </wavelet>
    <signal-to-noise-ratio> 3 </signal-to-noise-ratio>
  </angle-gather>
</survey>

<well-data>
  <log-names>
    <time>    TWT  </time>
    <dt>      DT   </dt>
    <dts>     DTS  </dts>
    <density> RHOB </density>
  </log-names>
  <well>
    <file-name> ../../5_two_cubes_four_wells_pred_nokrig/input/logs/ed6406_3-3_cut.rms    </file-name>
  </well>
  <well>
    <file-name> ../../5_two_cubes_four_wells_pred_nokrig/input/logs/ed6506_12-3_cut.rms   </file-name>
  </well>
  <well>
    <file-name> ../../5_two_cubes_four_wells_pred_nokrig/input/logs/ed6506_12-8_cut.rms   </file-name>
  </well>
  <well>
    <file-name> ../../5_two_cubes_four_wells_pred_nokrig/input/logs/ed6506_12-S4H_cut.rms </file-name>
  </well>
</well-data>

<prior-model>
  <background>
    <vp-file>
      ../../5_two_cubes_four_wells_pred_nokrig/input/background/CRAVA_BG_Vp.storm
    </vp-file>
    <vs-file>
      ../../5_two_cubes_four_wells_pred_nokrig/input/background/CRAVA_BG_Vs.storm
    </vs-file>
    <density-file>
      ../../5_two_cubes_four_wells_pred_nokrig/input/background/CRAVA_BG_Rho.storm
    </density-file>
  </background>
  <lateral-correlation>
    <variogram-type> genexp </variogram-type>
    <range> 1000 </range>
    <subrange> 500 </subrange>
    <angle> 70 </angle>
    <power> 1  </power>
  </lateral-correlation>
</prior-model>

<project-settings>
  <output-volume>
    <area>
      <reference-point-x>  398500 </reference-point-x>
      <reference-point-y> 7210300 </reference-point-y>
      <length-x> 4500 </length-x>
      <length-y> 4500 </length-y>
      <angle> 23.627 </angle>
      <sample-density-x> 50 </sample-density-x>
      <sample-density-y> 50 </sample-density-y>
    </area>
    <interval-two-surfaces>
      <top-surface>
        <time-file>
          ../../5_two_cubes_four_wells_pred_nokrig/input/horizons/TopTime_avg3100ms.storm
        </time-file>
      </top-surface>
      <base-surface>
        <time-file>
          ../../5_two_cubes_four_wells_pred_nokrig/input/horizons/BaseTime_avg3600ms.storm
        </time-file>
      </base-surface>
      <number-of-layers>
        125
      </number-of-layers>
    </interval-two-surfaces>
  </output-volume>
  <io-settings>
    <file-output-prefix> CRAVA_ </file-output-prefix>
    <grid-output>
      <format>
        <ascii> yes </ascii>
      </format>
      <domain>
        <time>  yes </time>
        <depth> no </depth>
      </domain>
      <parameters>
        <vp> yes </vp>
        <vs> yes </vs>
        <density> yes </density>
        <background> no </background>
      </parameters>
    </grid-output>
    <well-output>
      <wells> no </wells>
      <blocked-wells> no </blocked-wells>
    </well-output>
    <other-output>
      <wavelets>            no </wavelets>
      <prior-correlations>  no </prior-correlations>
      <background-trend-1d> no </background-trend-1d>
    </other-output>
  </io-settings>
  <advanced-settings>
    <fft-grid-padding>
      <x-fraction> 0.200001 </x-fraction>
      <y-fraction> 0.200001 </y-fraction>
      <z-fraction> 1.000000 </z-fraction>
    </fft-grid-padding>
    <white-noise-component>
      0.1
    </white-noise-component>
  </advanced-settings>
</project-settings>
</crava>

\end{verbatim}
\end{small}

%---------------------------------------------------

\bibliography{references}

\end{document}
